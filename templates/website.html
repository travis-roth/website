{% extends "base.html" %}

{% block title %}Weather App{% endblock %}

{% block head %}
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<!-- Include Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
{% endblock %}

{% block content %}
<section>
    <h1>travisroth.info: How it's made</h1>
    <p>This website application is hosted on the cloud through AWS. I built the app using Flask, the Python web framework. 
    I wanted to see how people interacted with my site, so I built a data collection pipeline. As people visit and click around, those interactions are tracked and stored in a PostgreSQL database, also hosted on AWS.
    Please enjoy the dashboard below, showing user activity on this site.
    </p>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var pageViewsData = {{ page_views | safe }};
            var dailyUsersData = {{ daily_users | safe }};
            var userLocationsData = {{ user_locations | safe }};

            // Call a function to initialize the charts and map with the retrieved data
            initializeDashboard(pageViewsData, dailyUsersData, userLocationsData);
        });

        function initializeDashboard(pageViewsData, dailyUsersData, userLocationsData) {
            // Call functions to initialize Leaflet map and Chart.js charts
            // Use the provided data as needed
        }
    </script>

    <script src="{{ url_for('static', filename='scripts/analytics.js') }}"></script>
</section>
{% endblock %}
